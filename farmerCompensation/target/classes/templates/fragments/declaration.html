<declaration xmlns:sec="http://www.w3.org/1999/xhtml">

    <div th:if="${users}">
    <div th:if="${ not#lists.isEmpty(declarationForm)}">
        <table class="table">
            <thead>
            <tr>
                <th>ID</th>
                <th>Description</th>
                <th>Actions</th>
            </tr>
            </thead>

            <tbody>
            <tr th:each="declaration : ${declarationForm}">
                <td th:text="${declaration.id}"></td>
                <td th:text="${declaration.description}"></td>
                <td th:if="${declaration.id}">
                    <a class="btn btn-info" role="button" th:href="@{/declaration/{user_id}/{declaration_id}(user_id=${users.id},declaration_id=${declaration.id})}">Edit</a>
                    <a class="btn btn-info" role="button" th:href="@{/declaration/{user_id}/details/{declaration_id}(user_id=${users.id},declaration_id=${declaration.id})}">Details</a>
                    <a class="btn btn-danger" role="button" th:href="@{/declaration/{user_id}/delete/{declaration_id}(user_id=${users.id},declaration_id=${declaration.id})}" onclick="return confirm('Are you sure you want to delete this item?')">Delete</a>
                    <a>Status:</a>
                    <button type="button" th:text="${declaration.status}" disabled></button>

                </td>
            </tr>
            </tbody>
        </table>

    </div>
    <div th:if="${ #lists.isEmpty(declarationForm)}">
        No Declarations found!
    </div>

    <a class="btn btn-primary" role="button" th:href="@{/declaration/{id}/new(id=${users.id})}">Create new Declaration</a>

    </div>

    <script src="https://code.jquery.com/jquery-3.6.4.min.js">

        function deleteDeclaration(button) {
            var userId = $(button).attr('th:user_id');
            var declarationId = $(button).attr('th:declaration_id');

            $.ajax({
                type: 'DELETE',
                url: '/declaration/' + userId + '/' + declarationId,
                success: function (data) {
                    // Optionally, handle success response
                    console.log('Declaration deleted successfully');
                    // You may want to update the UI or perform additional actions here
                },
                error: function (error) {
                    // Handle error response
                    console.error('Error deleting declaration', error);
                }
            });
        }
    </script>
</declaration>
